language: ruby
sudo: false
rvm:
  - 2.2.2
script:
  - 'createuser exercism --superuser && createdb -O exercism exercism_test'
  - 'cp config/database.example.yml config/database.yml'
  - 'RACK_ENV=test CI=1 bundle exec rake db:migrate test_with_coverage'
  - '( cd client && npm install && bower install && gulp test && gulp build:production )'
  - "! git grep ' $' -- \\*.rb"
cache:
  - bundler
